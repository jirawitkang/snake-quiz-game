<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Snake Quiz – Multiplayer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light" />
  <link rel="stylesheet" href="ui.css" />
</head>

<body>
  <header class="app-header">
    <div class="header-inner">
      <div class="brand" aria-label="Snake Quiz – Multiplayer">
        <div class="brand-badge" aria-hidden="true">SQ</div>
        <div class="brand-title">
          <strong>Snake Quiz – Multiplayer</strong>
          <span>Library Purple Theme</span>
        </div>
      </div>
      <div class="header-meta" aria-label="สถานะห้องและบทบาท">
        <div class="pill" id="uiRoomPill">Room: -</div>
        <div class="pill" id="uiRolePill">Role: -</div>
      </div>
    </div>
  </header>

  <main class="container">
    <div id="entrySection">
      <div class="section-title">LIBRARY RESOURCES</div>

      <div class="grid-2">
        <!-- Host -->
        <div class="card">
          <h2>สร้างห้อง (Host)</h2>

          <label for="hostNameInput">ชื่อของคุณ (Host)</label>
          <input
            id="hostNameInput"
            placeholder="เช่น ครูเอ, Teacher A"
            maxlength="40"
            autocomplete="name"
            spellcheck="false"
          />

          <button id="createRoomBtn" class="btn-primary" type="button">
            ถัดไป: ตั้งค่าเกม
          </button>

          <div id="hostGameOptions" class="mt-14" style="display:none;">
            <div class="section-title">GAME SETTINGS</div>

            <div class="card-split">
              <div class="split-col">
                <label for="questionSetSelect">ชุดคำถามที่ใช้ในเกม</label>
                <select id="questionSetSelect">
                  <option value="general">ชุดคำถามทั่วไป</option>
                  <option value="setA">ชุดคำถามตัวอย่าง A</option>
                  <option value="setB">ชุดคำถามตัวอย่าง B</option>
                </select>

                <label for="maxRoundsInput">จำนวนรอบสูงสุดของเกม</label>
                <input id="maxRoundsInput" type="number" min="1" step="1" value="10" inputmode="numeric" />
              </div>

              <div class="split-col">
                <label for="maxWinnersInput">จำนวนผู้เข้าเส้นชัย (เกมจบเมื่อมีผู้เข้าเส้นชัยครบ)</label>
                <input id="maxWinnersInput" type="number" min="1" step="1" value="5" inputmode="numeric" />

                <label for="rewardCorrectInput">จำนวนช่องที่ได้เดินเพิ่มเมื่อตอบถูก</label>
                <input id="rewardCorrectInput" type="number" step="1" value="1" inputmode="numeric" />

                <label for="penaltyWrongInput">จำนวนช่องที่ต้องเดินถอยเมื่อตอบผิด / ตอบไม่ทัน</label>
                <input id="penaltyWrongInput" type="number" step="1" value="-1" inputmode="numeric" />
              </div>
            </div>

            <button id="confirmCreateRoomBtn" class="btn-primary mt-14" type="button">
              ยืนยันสร้างห้อง
            </button>
          </div>
        </div>

        <!-- Player -->
        <div class="card">
          <h2>เข้าห้อง (Player)</h2>

          <label for="roomCodeInput">Room Code</label>
          <input
            id="roomCodeInput"
            placeholder="เช่น ABC123"
            maxlength="12"
            autocapitalize="characters"
            autocomplete="off"
            spellcheck="false"
          />

          <label for="playerNameInput">ชื่อนักเรียน</label>
          <input
            id="playerNameInput"
            placeholder="เช่น นร.01, นร.ภูมิ, ฯลฯ"
            maxlength="40"
            autocomplete="name"
            spellcheck="false"
          />

          <button id="joinRoomBtn" class="btn-primary" type="button">Join ห้อง</button>
        </div>
      </div>
    </div>

    <!-- Lobby -->
    <div id="lobby" style="display:none;">
      <div class="lobby-bar mt-14">
        <div class="section-title">LOBBY</div>

        <div id="lobbyBadges" class="lobby-badges" aria-label="สถานะห้อง"></div>

        <div class="lobby-actions">
          <button id="cancelRoomBtn" class="btn-ghost" type="button" style="display:none;">ยกเลิกห้อง</button>
          <button id="leaveRoomBtn" class="btn-ghost" type="button" style="display:none;">ออกจากห้อง</button>
        </div>
      </div>

      <div class="card lobby-card">
        <div class="lobby-card-head">
          <div id="roleInfo" class="muted role-line" aria-live="polite"></div>
        </div>

        <div class="lobby-list-head">
          <div class="lobby-list-title"><strong>รายชื่อผู้เล่นในห้อง:</strong></div>

          <div class="lobby-list-actions">
            <button id="startGameBtn" class="btn-primary" type="button" style="display:none;">
              เริ่มเล่น
            </button>
          </div>
        </div>

        <ul id="playerList" aria-label="รายชื่อผู้เล่น"></ul>
      </div>
    </div>

    <!-- Game header bar (เหมือน LOBBY) -->
    <div id="gameBar" class="lobby-bar mt-14" style="display:none;">
      <div class="section-title">GAME BOARD</div>
    
      <div class="lobby-badges">
        <div class="lobby-badge" id="roundInfo">รอบที่: -</div>
        <div class="lobby-badge" id="phaseInfo">[สถานะรอบ: -]</div>
      </div>
    
      <!-- Host controls -->
      <div id="hostGameControls" class="lobby-actions" style="display:none;">
        <button id="startRoundBtn" class="btn-primary" type="button">เริ่มรอบใหม่</button>
        <button id="startQuestionBtn" class="btn-ghost" type="button">เริ่มคำถาม</button>
        <button id="revealAnswerBtn" class="btn-ghost" type="button">เฉลยคำถาม</button>
      </div>
    
      <!-- Player controls (ตำแหน่งเดียวกับ host controls) -->
      <div id="playerGameControls" class="lobby-actions" style="display:none;">
        <button id="rollDiceBtn" class="btn-primary" type="button">ทอยลูกเต๋า</button>
      </div>
    </div>
    
    <!-- Game card -->
    <div id="gameArea" class="card" style="display:none;">
      <div id="board"></div>
    
      <div id="endGameArea" style="display:none; margin-top:1rem;">
        <h3>สรุปผลเกม</h3>
        <div id="endGameSummary"></div>
      </div>
    </div>

    <!-- Question Card -->
    <div id="questionArea" class="card mt-14" style="display:none;">
      <div id="countdownDisplay" aria-live="assertive"></div>
      <div id="questionText"></div>
      <div id="choicesContainer"></div>
    </div>
  </main>

  <noscript>เกมนี้ต้องเปิดใช้งาน JavaScript</noscript>
  <script type="module" src="app.js"></script>
</body>
</html>
