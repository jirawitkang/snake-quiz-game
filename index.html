<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Snake Quiz – Multiplayer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light" />
  <link rel="stylesheet" href="ui.css" />
</head>

<body>
  <!-- Dice Overlay (Modal) -->
  <div id="diceOverlay" class="overlay" style="display:none;">
    <div class="overlay-card">
      <div class="overlay-title">กำลังทอยลูกเต๋า…</div>
  
      <div class="dice-scene">
        <!-- ตัวครอบกล้อง: ทำให้เห็น 3 ด้านตลอดเวลา -->
        <div class="dice-cam">
          <div id="dice3d" class="dice">
            <!-- FRONT = 5 -->
            <div class="face face-1">
              <span class="pip tl"></span>
              <span class="pip tr"></span>
              <span class="pip c"></span>
              <span class="pip bl"></span>
              <span class="pip br"></span>
            </div>
          
            <!-- RIGHT = 4 -->
            <div class="face face-2">
              <span class="pip tl"></span>
              <span class="pip tr"></span>
              <span class="pip bl"></span>
              <span class="pip br"></span>
            </div>
          
            <!-- TOP = 1 -->
            <div class="face face-3">
              <span class="pip c"></span>
            </div>
          
            <!-- BOTTOM = 6 -->
            <div class="face face-4">
              <span class="pip tl"></span>
              <span class="pip ml"></span>
              <span class="pip bl"></span>
              <span class="pip tr"></span>
              <span class="pip mr"></span>
              <span class="pip br"></span>
            </div>
          
            <!-- LEFT = 3 -->
            <div class="face face-5">
              <span class="pip tl"></span>
              <span class="pip c"></span>
              <span class="pip br"></span>
            </div>
          
            <!-- BACK = 2 -->
            <div class="face face-6">
              <span class="pip tl"></span>
              <span class="pip br"></span>
            </div>
          </div>
        </div>
      </div>
  
      <div id="diceHint" class="overlay-hint">โปรดรอสักครู่…</div>
  
      <button id="closeDiceOverlayBtn" class="btn-primary mt-14" type="button" style="display:none;">
        กลับไปที่ GAME BOARD
      </button>
    </div>
  </div>
  <header class="app-header">
    <div class="header-inner">
      <div class="brand" aria-label="Snake Quiz – Multiplayer">
        <div class="brand-badge" aria-hidden="true">SQ</div>
        <div class="brand-title">
          <strong>Snake Quiz – Multiplayer</strong>
          <span>Library Purple Theme</span>
        </div>
      </div>
      <div class="header-meta" aria-label="สถานะห้องและบทบาท">
        <div class="pill" id="uiRoomPill">Room: -</div>
        <div class="pill" id="uiRolePill">Role: -</div>
      </div>
    </div>
  </header>

  <main class="container">
    <div id="entrySection">
      <div class="section-title">FOOD QUEST</div>
    
      <!-- หน้าเลือกโหมด (Page 1) -->
      <div id="modeSelectPage" class="card entry-hero">
        <h2 class="entry-title">Choose your role</h2>
        <p class="muted entry-sub">
          เลือกบทบาทก่อน จากนั้นกด <strong>PLAY</strong> เพื่อไปหน้ากรอกข้อมูล
        </p>
    
        <div class="mode-grid">
          <button id="pickAdminBtn" class="mode-card" type="button" aria-pressed="false">
            <div class="mode-badge">ADMIN</div>
            <div class="mode-name">Admin</div>
            <div class="mode-desc muted">สร้างห้อง + ตั้งค่าเกม</div>
          </button>
    
          <button id="pickPlayerBtn" class="mode-card" type="button" aria-pressed="false">
            <div class="mode-badge">PLAY</div>
            <div class="mode-name">Food Adventure</div>
            <div class="mode-desc muted">เข้าห้อง + ตั้งชื่อผู้เล่น</div>
          </button>
        </div>
    
        <button id="modePlayBtn" class="btn-primary mt-14" type="button" disabled>
          PLAY
        </button>
      </div>
    
      <!-- หน้าถัดไป: Admin (Host เดิม) -->
      <div id="adminEntryPage" class="grid-2" style="display:none;">
        <div class="card">
          <h2>Admin (Host)</h2>
    
          <label for="hostNameInput">ชื่อของคุณ (Admin)</label>
          <input
            id="hostNameInput"
            placeholder="เช่น Teacher A"
            maxlength="40"
            autocomplete="name"
            spellcheck="false"
          />
    
          <button id="createRoomBtn" class="btn-primary" type="button">
            ถัดไป: ตั้งค่าเกม
          </button>
    
          <div id="hostGameOptions" class="mt-14" style="display:none;">
            <div class="section-title">GAME SETTINGS</div>
    
            <div class="card-split">
              <div class="split-col">
                <label for="questionSetSelect">ชุดคำถามที่ใช้ในเกม</label>
                <select id="questionSetSelect">
                  <option value="general">ชุดคำถามทั่วไป</option>
                  <option value="setA">ชุดคำถามตัวอย่าง A</option>
                  <option value="setB">ชุดคำถามตัวอย่าง B</option>
                </select>
    
                <label for="maxRoundsInput">จำนวนรอบสูงสุดของเกม</label>
                <input id="maxRoundsInput" type="number" min="1" step="1" value="10" inputmode="numeric" />
              </div>
    
              <div class="split-col">
                <label for="maxWinnersInput">จำนวนผู้เข้าเส้นชัย (เกมจบเมื่อครบ)</label>
                <input id="maxWinnersInput" type="number" min="1" step="1" value="5" inputmode="numeric" />
    
                <label for="rewardCorrectInput">ได้เดินเพิ่มเมื่อตอบถูก</label>
                <input id="rewardCorrectInput" type="number" step="1" value="1" inputmode="numeric" />
    
                <label for="penaltyWrongInput">ถอยเมื่อตอบผิด/ไม่ทัน</label>
                <input id="penaltyWrongInput" type="number" step="1" value="-1" inputmode="numeric" />
              </div>
            </div>
    
            <button id="confirmCreateRoomBtn" class="btn-primary mt-14" type="button">
              ยืนยันสร้างห้อง
            </button>
          </div>
    
          <button id="backToModeBtn1" class="btn-ghost mt-14" type="button">
            ← กลับไปเลือกโหมด
          </button>
        </div>
    
        <div class="card" aria-hidden="true">
          <h2>How to play</h2>
          <p class="muted">
            Admin สร้างห้องและแชร์ Room Code ให้ผู้เล่น จากนั้นเริ่มเกมใน Lobby
          </p>
        </div>
      </div>
    
      <!-- หน้าถัดไป: Player (Player เดิม) -->
      <div id="playerEntryPage" class="grid-2" style="display:none;">
        <div class="card">
          <h2>Food Adventure (Player)</h2>
    
          <label for="roomCodeInput">Room Code</label>
          <input
            id="roomCodeInput"
            placeholder="เช่น ABC123"
            maxlength="12"
            autocapitalize="characters"
            autocomplete="off"
            spellcheck="false"
          />
    
          <label for="playerNameInput">Adventure name</label>
          <input
            id="playerNameInput"
            placeholder="เช่น Team01, นร.ภูมิ"
            maxlength="40"
            autocomplete="name"
            spellcheck="false"
          />
    
          <button id="joinRoomBtn" class="btn-primary" type="button">Join ห้อง</button>
    
          <button id="backToModeBtn2" class="btn-ghost mt-14" type="button">
            ← กลับไปเลือกโหมด
          </button>
        </div>
    
        <div class="card" aria-hidden="true">
          <h2>Tip</h2>
          <p class="muted">
            กรุณาตรวจสอบ Room Code ให้ถูกต้อง และตั้งชื่อไม่ซ้ำกับเพื่อนในห้อง
          </p>
        </div>
      </div>
    </div>

    <!-- Lobby -->
    <div id="lobby" style="display:none;">
      <div class="lobby-bar mt-14">
        <div class="section-title">LOBBY</div>

        <div id="lobbyBadges" class="lobby-badges" aria-label="สถานะห้อง"></div>

        <div class="lobby-actions">
          <button id="cancelRoomBtn" class="btn-ghost" type="button" style="display:none;">ยกเลิกห้อง</button>
          <button id="leaveRoomBtn" class="btn-ghost" type="button" style="display:none;">ออกจากห้อง</button>
        </div>
      </div>

      <div class="card lobby-card">
        <div class="lobby-card-head">
          <div id="roleInfo" class="muted role-line" aria-live="polite"></div>
        </div>

        <div class="lobby-list-head">
          <div class="lobby-list-title"><strong>รายชื่อผู้เล่นในห้อง:</strong></div>

          <div class="lobby-list-actions">
            <button id="startGameBtn" class="btn-primary" type="button" style="display:none;">
              เริ่มเล่น
            </button>
          </div>
        </div>

        <ul id="playerList" aria-label="รายชื่อผู้เล่น"></ul>
      </div>
    </div>

    <!-- Game header bar (เหมือน LOBBY) -->
    <div id="gameBar" class="lobby-bar mt-14" style="display:none;">
      <div class="section-title">GAME BOARD</div>
    
      <div class="lobby-badges">
        <div class="lobby-badge" id="roundInfo">รอบที่: -</div>
        <div class="lobby-badge" id="phaseInfo">[สถานะรอบ: -]</div>
      </div>
    
      <!-- Host controls -->
      <div id="hostGameControls" class="lobby-actions" style="display:none;">
        <button id="startRoundBtn" class="btn-primary" type="button">เริ่มรอบใหม่</button>
        <button id="startQuestionBtn" class="btn-ghost" type="button">เริ่มคำถาม</button>
        <button id="revealAnswerBtn" class="btn-ghost" type="button">เฉลยคำถาม</button>
      </div>
    
      <!-- Player controls (ตำแหน่งเดียวกับ host controls) -->
      <div id="playerGameControls" class="lobby-actions" style="display:none;">
        <button id="rollDiceBtn" class="btn-primary" type="button">ทอยลูกเต๋า</button>
      </div>
    </div>
    
    <!-- Game card -->
    <div id="gameArea" class="card" style="display:none;">
      <div id="board"></div>
    
      <div id="endGameArea" style="display:none; margin-top:1rem;">
        <h3>สรุปผลเกม</h3>
        <div id="endGameSummary"></div>
      </div>
    </div>

    <!-- Question Card -->
    <div id="questionArea" class="card mt-14" style="display:none;">
      <div id="countdownDisplay" aria-live="assertive"></div>
      <div id="questionText"></div>
      <div id="choicesContainer"></div>
    </div>
  </main>

  <noscript>เกมนี้ต้องเปิดใช้งาน JavaScript</noscript>
  <script type="module" src="app.js"></script>
</body>
</html>
