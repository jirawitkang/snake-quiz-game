<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Snake Quiz – Multiplayer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="ui.css" />
</head>

<body>
  <header class="app-header">
    <div class="header-inner">
      <div class="brand">
        <div class="brand-badge">SQ</div>
        <div class="brand-title">
          <strong>Snake Quiz – Multiplayer</strong>
          <span>Library Purple Theme</span>
        </div>
      </div>
      <div class="header-meta">
        <div class="pill" id="uiRoomPill">Room: -</div>
        <div class="pill" id="uiRolePill">Role: -</div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="section-title">LIBRARY RESOURCES</div>

    <div class="grid-2">
      <!-- Host -->
      <div class="card">
        <h2>สร้างห้อง (Host)</h2>

        <label for="hostNameInput">ชื่อของคุณ (Host)</label>
        <input id="hostNameInput" placeholder="เช่น ครูเอ, Teacher A" />

        <button id="createRoomBtn" class="btn-primary" type="button">ถัดไป: ตั้งค่าเกม</button>

        <div id="hostGameOptions" class="mt-14" style="display:none;">
          <div class="section-title">GAME SETTINGS</div>

          <div class="card-split">
            <div class="split-col">
              <label for="questionSetSelect">ชุดคำถามที่ใช้ในเกม</label>
              <select id="questionSetSelect">
                <option value="general">ชุดคำถามทั่วไป</option>
                <option value="setA">ชุดคำถามตัวอย่าง A</option>
                <option value="setB">ชุดคำถามตัวอย่าง B</option>
              </select>

              <label for="maxRoundsInput">จำนวนรอบสูงสุดของเกม</label>
              <input id="maxRoundsInput" type="number" min="1" value="10" />
            </div>

            <div class="split-col">
              <label for="maxWinnersInput">จำนวนผู้เข้าเส้นชัย (เกมจบเมื่อมีผู้เข้าเส้นชัยครบ)</label>
              <input id="maxWinnersInput" type="number" min="1" value="5" />

              <label for="rewardCorrectInput">จำนวนช่องที่ได้เดินเพิ่มเมื่อตอบถูก</label>
              <input id="rewardCorrectInput" type="number" value="1" />

              <label for="penaltyWrongInput">จำนวนช่องที่ต้องเดินถอยเมื่อตอบผิด / ตอบไม่ทัน</label>
              <input id="penaltyWrongInput" type="number" value="-1" />
            </div>
          </div>

          <button id="confirmCreateRoomBtn" class="btn-primary mt-14" type="button">
            ยืนยันสร้างห้อง
          </button>
        </div>
      </div>

      <!-- Player -->
      <div class="card">
        <h2>เข้าห้อง (Player)</h2>

        <label for="roomCodeInput">Room Code</label>
        <input id="roomCodeInput" placeholder="เช่น ABC123" />

        <label for="playerNameInput">ชื่อนักเรียน</label>
        <input id="playerNameInput" placeholder="เช่น นร.01, นร.ภูมิ, ฯลฯ" />

        <button id="joinRoomBtn" class="btn-primary" type="button">Join ห้อง</button>
      </div>
    </div>

    <!-- Lobby -->
    <div id="lobby" style="display:none;">
      <div class="section-title mt-14">LOBBY</div>
      <div class="card">
        <div id="roomInfo"></div>
        <div id="roleInfo" class="muted"></div>

        <p><strong>รายชื่อผู้เล่นในห้อง:</strong></p>
        <!-- เปลี่ยนเป็น DIV เพื่อ render TABLE ได้ถูกต้อง -->
        <div id="playerList"></div>

        <div id="hostRoundControls" class="mt-10" style="display:none;">
          <button id="startRoundBtn" class="btn-primary" type="button">เริ่มรอบใหม่ (Host)</button>
          <button id="startQuestionBtn" class="btn-ghost" type="button">เริ่มคำถาม (Host)</button>
          <button id="revealAnswerBtn" class="btn-ghost" type="button">เฉลยคำถาม & ขยับตัว (Host)</button>
        
          <!-- ✅ เพิ่ม -->
          <button id="cancelRoomBtn" class="btn-ghost" type="button">ยกเลิกห้อง (Host)</button>
        </div>
        
        <!-- ✅ เพิ่มปุ่มออกจากห้อง ใช้ได้ทั้ง Host/Player -->
        <div class="mt-10">
          <button id="leaveRoomBtn" class="btn-ghost" type="button">ออกจากห้อง / เริ่มใหม่</button>
        </div>
      </div>
    </div>

    <!-- Game Area -->
    <div class="section-title mt-14">GAME BOARD</div>
    <div id="gameArea" class="card" style="display:none;">
      <div id="roundInfo"></div>
      <div id="phaseInfo" class="muted"></div>

      <div class="game-shell mt-10">
        <div>
          <div id="board"></div>
        </div>

        <div>
          <div id="playerControls">
            <button id="rollDiceBtn" class="btn-primary" type="button">ทอยลูกเต๋า</button>
            <div id="playerStatus" class="muted mt-10"></div>
          </div>

          <div id="questionArea" class="mt-14" style="display:none;">
            <div id="countdownDisplay"></div>
            <div id="questionText"></div>
            <div id="choicesContainer"></div>
          </div>
        </div>
      </div>

      <div id="endGameArea" style="display:none; margin-top:1rem;">
        <h3>สรุปผลเกม</h3>
        <div id="endGameSummary"></div>
      </div>
    </div>
  </div>

  <noscript>เกมนี้ต้องเปิดใช้งาน JavaScript</noscript>
  <script type="module" src="app.js"></script>
</body>
</html>
